<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<meta name="ad.size" content="width={{width}}, height={{height}}" />
	<meta name="generator" content="CMDBANNER.IO 0.1.0" />
	<meta name="template" content="Creative 1.0.0" />
	<meta name="environment" content="gwd-dv360" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<title>{{CreativeName}}</title>

	<!-- MovieClip combined with EaselJS  -->
	<!--
	<script src="https://s0.2mdn.net/ads/studio/cached_libs/easeljs_1.0.0_min.js"></script>
	<script src="https://s0.2mdn.net/ads/studio/cached_libs/tweenjs_1.0.0_min.js"></script>
	<script src="https://s0.2mdn.net/ads/studio/cached_libs/preloadjs_1.0.0_min.js"></script>
	<script src="https://code.createjs.com/1.0.0/createjs.min.js"></script>
	<script src="https://s0.2mdn.net/ads/studio/cached_libs/createjs_2019.11.15_min.js"></script>
	-->
	<script src="https://s0.2mdn.net/ads/studio/cached_libs/easeljs_1.0.0_min.js"></script>
	<script src="https://s0.2mdn.net/ads/studio/cached_libs/preloadjs_1.0.0_min.js"></script>
	<script src="https://s0.2mdn.net/ads/studio/cached_libs/gsap_3.9.1_min.js"></script>
	<!-- AdHelper.min.js -->
	<script type="text/javascript">
		this.createjs = this.createjs || {}, function () { "use strict"; function e(e) { this._stage = e, this.tickListener = null, this.awake = !0, this.sleepEnabled = !1, this.hidden = !1, this.pixelRatio = this._getBackingRatio(), this._time = 0, this._awake = !0, this._sleepy = !1, this._sleepT = 0, this._sleepMousedownT = null, this._sleepInBoundsT = null, this._sleepUseTicks = !1, this._mouseInDoc = !1, this._perfDelay = 0, this._perfCount = 0, this._perfThreshold = 0, this._perfFPS = 0, this._width = e.canvas.width, this._height = e.canvas.height, createjs.Ticker.on("tick", this) } var t = e.prototype; createjs.EventDispatcher && (t = e.prototype = new createjs.EventDispatcher), e.isSupported = function () { return !!window.CanvasRenderingContext2D }, e.showAltImage = function (t, i, s, n, h) { return e.showAltHTML(t, (s ? "<a target='" + (h || "_blank") + "' href='" + s + "'>" : "") + "<img src='" + i + "' border='0' alt='" + (n || "") + "'>" + (s ? "</a>" : "")) }, e.showAltHTML = function (t, i) { var s = document.createElement("div"); return s.innerHTML = i || "", s.id = "adAlt", e.showAlt(t, s) }, e.showAlt = function (e, t) { return "string" == typeof e && (e = document.getElementById(e)), t.style.display = "block", e.parentNode.replaceChild(t, e), t }, t.timeSync = function (e) { var t = void 0 !== this._stage.masterFrameRate; if (this._stage.masterFrameRate = e || lib && lib.properties && lib.properties.fps || this._getTickerFPS(), t) return this; var i = createjs.Stage.prototype, s = createjs.MovieClip.prototype; return i.__tick = i._tick, i._tick = function (e) { e.stage = this, this.__tick(e) }, s.__tick = s._tick, s._tick = function (e) { !this.ignoreMasterFrameRate && e.stage && (this.framerate = e.stage.masterFrameRate || null), this.__tick(e) }, this }, t.watchFPS = function (e, t) { return this._perfFPS = e || .9 * this._getTickerFPS() - 1 | 0, this._perfThreshold = t || 1, this._perfCount = 0, this._perfDelay = 5, this }, t.highDPI = function (e, t) { t = t || 1; var i = this._getBackingRatio(), s = Math.max(1, (window.devicePixelRatio || 1) / i), n = this._stage, h = n.canvas, a = h.style, r = this._width / t, o = this._height / t; return e === !1 && (s = 1 / i), h.width = r * s, h.height = o * s, a.width = r + "px", a.height = o + "px", n.scaleX = n.scaleY = s / t, this.pixelRatio = (1 === i ? s : e === !1 ? 1 : i) / t, this }, t.setSleep = function (e, t, i, s, n) { return null != t && stage.addEventListener("stagemousedown", this), null != i && (document.addEventListener("mouseout", this, !0), document.addEventListener("mousemove", this, !0)), this.tickListener = n || this._stage, this._sleepMousedownT = t, this._sleepInBoundsT = i, this._sleepUseTicks = !!s, this.sleepEnabled = !0, this._sleepy = !1, this._sleepT = null != e ? this._getTime() + 1e3 * e : 0, this }, t.sleep = function (e) { return e ? void (this._sleepT = this._getTime() + (e || 0)) : (this._sleepy = !1, this._sleepT = 0, this._awake = !1, void this._sleep()) }, t.wake = function (e) { this._sleepy = !1, null != e ? this._sleepT = Math.max(this._sleepT, this._getTime() + (e || 0)) : this._sleepT = 0, this._awake = !0, this._wake() }, t.handleEvent = function (e) { if ("tick" === e.type) this._tick(e); else if ("stagemousedown" === e.type) { var t = this._sleepMousedownT; this.sleepEnabled && null != t && this.wake(1e3 * t) } else "mousemove" === e.type ? this._mouseInDoc = !0 : "mouseout" === e.type && (this._mouseInDoc = !1) }, t._getTickerFPS = function () { return createjs.Ticker.timingMode == createjs.Ticker.RAF ? 60 : createjs.Ticker.framerate }, t._sleep = function () { this.awake && (createjs.Ticker.paused = !0, this.tickListener && createjs.Ticker.removeEventListener("tick", this.tickListener), window.TweenLite && TweenLite.ticker && TweenLite.ticker.sleep(), this.dispatchEvent("sleep"), this.awake = !1) }, t._wake = function () { if (!this.awake) { if (createjs.Ticker.paused = !1, this.tickListener && createjs.Ticker.addEventListener("tick", this.tickListener), window.TweenLite) { var e = TweenLite.ticker, t = e.frame; e.frame = 1, e.wake(!0), e.frame = t } this.dispatchEvent("wake"), this.awake = !0 } }, t._tick = function (e) { if (document.hidden || document.webkitHidden || document.mozHidden) return this.hidden = !0, this._sleep(), void (createjs.Sound && (createjs.Sound.muted = !0)); this.hidden && (this.hidden = !1, this._awake && this._wake(), this._perfDelay = 3, createjs.Sound && (createjs.Sound.muted = !1)), this._time += this._sleepUseTicks ? 1 : e.delta; var t; if (this._perfFPS && --this._perfDelay <= 0 && (t = createjs.Ticker.getMeasuredFPS(1)) > -1) { var i = 1 - Math.max(0, Math.min(1, t / this._perfFPS)); this._perfCount = Math.max(0, this._perfCount + (0 === i ? -.2 : i * i * .5 + .1)), this._perfCount > this._perfThreshold && (this._perfFPS = 0, this.dispatchEvent(new createjs.Event("slow", !1, !0)) && (this.sleep(), this.sleepEnabled = !1)) } this.sleepEnabled && (null != this._sleepInBoundsT && this._stage.mouseInBounds && this._mouseInDoc && this.wake(1e3 * this._sleepInBoundsT), this._sleepy ? this.sleep() : this._sleepT && this._getTime() >= this._sleepT && (this._sleepy = !0)) }, t._getTime = function () { return this._time }, t._getBackingRatio = function () { var e = this._stage.canvas.getContext("2d"); return e.backingStorePixelRatio || e.webkitBackingStorePixelRatio || e.mozBackingStorePixelRatio || e.msBackingStorePixelRatio || e.oBackingStorePixelRatio || 1 }, createjs.AdHelper = e }();
	</script>
	<!-- Custom Creative Script -->
	<script src="./cmdcreative.js"></script>

	<script src="{{creativeAdPlatform}}"></script>

	<style type="text/css">
		html,
		body {
			width: 100%;
			height: 100%;
			margin: 0px;
		}

		#clickthrough-button {
			cursor: pointer;

			width: {
					{
					width
				}
			}

			px;

			height: {
					{
					height
				}
			}

			px;
			z-index: 1;
			background-color: transparent;
			border: none;
			outline: none;
			position: absolute;
			top:0;
			left:0;
		}

		#bannerCanvas- {
				{
				width
			}
		}

		- {
				{
				height
			}
		}

			{
			opacity: 0;
			transition: opacity 0.25s;
		}

		#bannerCanvas- {
				{
				width
			}
		}

		- {
				{
				height
			}
		}

		.ready {
			opacity: 1;
		}
	</style>
	<script type="text/javascript">
		var canvas, stage, exportRoot;
		var clickTag = '{{CreativeLinkTag}}';
		var assetsReady = false;

		function LoadCreativeAssets() {
			var loader = new createjs.LoadQueue(false);
			loader.addEventListener("complete", CreativeAssetsReady);
			loader.loadManifest(lib.properties.manifest);
		}

		function CreativeAssetsReady(evt) {
			assetsReady = true;
			//console.warn("creative assets loaded", assetsReady);
		}

		function PlayCreativeAnimation(evt) {

			document.getElementById("bannerCanvas-{{width}}-{{height}}").classList.add("ready");

			exportRoot = new lib.cmdCreativeAD(components);

			//createjs.Ticker.paused = false;
			createjs.Ticker.framerate = lib.properties.fps;
			createjs.Ticker.timingMode = createjs.Ticker.RAF;

			stage = new createjs.Stage(canvas);

			stage.enableMouseOver();
			stage.mouseMoveOutside = false;

			createjs.Ticker.addEventListener("tick", stage);

			stage.addChild(exportRoot);

			stage.update();

			console.log('STAGE:', stage);

			// enable touch for mobile devices:
			createjs.Touch.enable(stage);

			// create the AdHelper, and point it at the stage
			// it's important to do this after the FPS is set if you're using timeSynch!
			var ad = new createjs.AdHelper(stage)
				// sleep 15s after start, 4s after a click, 1s after the mouse leaves:
				//.setSleep(20, 4, 15)
				// force MCs to be time-synched (take roughly the same time regardless of real framerate):
				.timeSync()
				// render at full resolution on high DPI devices:
				.highDPI()
				// if framerate drops for too long, switch to alt:
				.watchFPS();

			// trace out AdHelper events for demo:
			ad.on("sleep", out);
			ad.on("wake", out);
			ad.on("slow", out);

			// to test watchFPS, lower the FPS after creating the AdHelper.
			// to test timeSynch, comment out watchFPS above, and set fps to 5.
			// createjs.Ticker.setFPS(5);
		}

		// Initialize Enabler
		//window.onload = function() {
		function platformInit() {

			LoadCreativeAssets();

			if (Enabler.isInitialized()) {
				enablerInitHandler();
			} else {
				Enabler.addEventListener(studio.events.StudioEvent.INIT, enablerInitHandler);
			}
		}

		// Runs when Enabler is ready.
		// If you want to show an initial image while you wait for the page to load, you can load the preload image, then hide it whenthe PAGE_LOADED event is received.
		// In the example files, the loading image is called "loading.gif" and its div element ID is "loading_image_dc".
		function enablerInitHandler() {
			if (Enabler.isPageLoaded()) {
				startAd();
			}
			else {
				// check for CreateJS support, and show alternate content if necessary
				if (!createjs.AdHelper.isSupported()) {
					console.error('CreateJS is not supported on this browser.');
					createjs.AdHelper.showAltImage(canvas, "", "{{CreativeLinkTag}}", "{{CreativeName}}");
					return; // don't bother continuing with anything else.
				}
				Enabler.addEventListener(studio.events.StudioEvent.PAGE_LOADED, startAd);
			}
		}

		// Runs when the page is completely loaded.
		function startAd() {
			canvas = document.getElementById("bannerCanvas-{{width}}-{{height}}");
			document.getElementById('clickthrough-button').addEventListener('click', bgExitHandler, false);

			if (assetsReady === true) {

				PlayCreativeAnimation();

			} else {

				var assetCheck = setInterval(function () {

					//console.log('Are assets ready?', assetsReady);

					if (assetsReady === true) {
						PlayCreativeAnimation();
						clearInterval(assetCheck);
					}

				}, 500);
			}
		}

		var bgExitHandler = function () {
			Enabler.exit('{{ExitName}}', '{{CreativeLinkTag}}');
		};

		// this just traces out AdHelper events as they happen:
		function out(evt) {
			console.log("event: " + evt.type);
		}

	</script>
</head>

<body onload="platformInit();" style="background-color:#D4D4D4;">
	<div id="clickthrough-button"></div>
	<canvas id="bannerCanvas-{{width}}-{{height}}" width="{{width}}" height="{{height}}"
		style="background-color:#FFFFFF"></canvas>
</body>

</html>